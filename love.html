<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Love Proposal</title>

<style>
body {
    margin:0;
    padding:0;
    font-family:'Segoe UI', sans-serif;
    background: linear-gradient(135deg,#ff9a9e,#fad0c4);
    overflow:hidden;
    text-align:center;
}

/* Main box */
.container {
    position:relative;
    background:white;
    width:90%;
    max-width:500px;
    margin:50px auto;
    padding:40px;
    border-radius:20px;
    box-shadow:0 10px 30px rgba(0,0,0,0.3);
    z-index:2;
}

h1 {
    color:#d6336c;
    font-size:24px;
}

button {
    padding:12px 25px;
    font-size:18px;
    border:none;
    border-radius:30px;
    cursor:pointer;
    margin:10px;
    transition:0.3s;
}

#yesBtn {
    background:#ff4d6d;
    color:white;
}

#yesBtn:hover {
    transform:scale(1.1);
}

#noBtn {
    background:#6c757d;
    color:white;
    position:absolute;
}

#message {
    display:none;
    font-size:20px;
    color:#c9184a;
    margin-top:20px;
}

/* Floating hearts */
.heart {
    position:fixed;
    bottom:-20px;
    font-size:20px;
    animation:floatUp 6s linear infinite;
}

@keyframes floatUp {
    0% { transform:translateY(0); opacity:0; }
    50% { opacity:1; }
    100% { transform:translateY(-100vh); opacity:0; }
}

canvas {
    position:fixed;
    top:0;
    left:0;
    pointer-events:none;
    z-index:1;
}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<div class="container">
    <h1 id="proposalText">Loading...</h1>

    <button id="yesBtn">Yes ‚ù§Ô∏è</button>
    <button id="noBtn">No üôà</button>

    <div id="message"></div>
</div>

<audio id="bgMusic" loop>
    <source src="/music.mp3" type="audio/mpeg">
</audio>
<script>
window.addEventListener("load", function () {

    /* =========================
       GET QUERY STRING VALUES
    ========================== */
    function getParam(name) {
        const params = new URLSearchParams(window.location.search);
        return params.get(name);
    }

    let herName = getParam("her");
    let hisName = getParam("him");

    if (!herName || herName.trim() === "") {
        herName = "My Love";
    }

    if (!hisName || hisName.trim() === "") {
        hisName = "Someone Special";
    }

    herName = decodeURIComponent(herName);
    hisName = decodeURIComponent(hisName);

    /* =========================
       INSERT TEXT DYNAMICALLY
    ========================== */
    document.getElementById("proposalText").innerHTML = `
        ${herName} ‚ù§Ô∏è <br><br>
        You are the most beautiful part of my life.<br><br>
        Will you always be mine?
    `;

    document.getElementById("message").innerHTML = `
        ${herName} üíñ<br><br>
        You just made ${hisName} the happiest person alive.<br><br>
        I promise to love you forever üåπ
    `;

    /* =========================
       MUSIC (Mobile Safe)
    ========================== */
    const music = document.getElementById("bgMusic");
    document.body.addEventListener("click", function () {
        music.play().catch(() => {});
    }, { once: true });

    /* =========================
       NO BUTTON ESCAPE
    ========================== */
    const noBtn = document.getElementById("noBtn");
    let moveLeft = true;

    function moveNoButton() {
        noBtn.style.position = "relative";
        noBtn.style.left = moveLeft ? "-120px" : "120px";
        moveLeft = !moveLeft;
    }

    noBtn.addEventListener("mouseover", moveNoButton);   // Desktop
    noBtn.addEventListener("touchstart", moveNoButton);  // Mobile

    /* =========================
       YES BUTTON
    ========================== */
    const yesBtn = document.getElementById("yesBtn");
    const message = document.getElementById("message");

    yesBtn.addEventListener("click", function () {
        message.style.display = "block";
        yesBtn.style.display = "none";
        noBtn.style.display = "none";
        startFireworks();
    });

    /* =========================
       FLOATING HEARTS
    ========================== */
    function createHeart() {
        const heart = document.createElement("div");
        heart.className = "heart";
        heart.innerHTML = "‚ù§Ô∏è";
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.fontSize = (Math.random() * 20 + 15) + "px";
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 6000);
    }

    setInterval(createHeart, 300);

    /* =========================
       FIREWORKS
    ========================== */
    const canvas = document.getElementById("fireworks");
    const ctx = canvas.getContext("2d");

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let particles = [];

    function startFireworks() {
        setInterval(() => {
            for (let i = 0; i < 80; i++) {
                particles.push({
                    x: canvas.width / 2,
                    y: canvas.height / 2,
                    angle: Math.random() * 2 * Math.PI,
                    speed: Math.random() * 6 + 2,
                    radius: 2
                });
            }
        }, 500);
    }

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        particles.forEach((p, index) => {
            p.x += Math.cos(p.angle) * p.speed;
            p.y += Math.sin(p.angle) * p.speed;
            p.speed *= 0.95;

            ctx.beginPath();
            ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
            ctx.fillStyle = "gold";
            ctx.fill();

            if (p.speed < 0.5) particles.splice(index, 1);
        });

        requestAnimationFrame(animate);
    }

    animate();

    window.addEventListener("resize", () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });

});
</script>


</body>
</html>

